
<!DOCTYPE html>
{%load static%}
<html lang="en">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">


    <style>
        @keyframes blinker {
            from {opacity: 1.0;}
            to {opacity: 0.0;}
          }

        .blink {
            text-decoration: blink;
            animation-name: blinker;
            animation-duration: 0.6s;
            animation-iteration-count:infinite;
            animation-timing-function:ease-in-out;
            animation-direction: alternate;
          }


    </style>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="./TW-ELEMENTS-PATH/dist/js/index.min.js"></script>
    <title>Document</title>
</head>
<body>
    <div
    class="mainbg w-full h-full bg-cover bg-no-repeat bg-[url('https://images.pexels.com/photos/4245826/pexels-photo-4245826.jpeg')]"

    >

    <!-- style="background-image: url('https://images.pexels.com/photos/4245826/pexels-photo-4245826.jpeg');" -->
        <nav class="bg-black fixed w-full px-4 py-4 text-white ">
            <ul class="flex justify-center">
                <a href="{%url 'home'%}" class="mx-2 cursor-pointer font-sans font-bold border-2 rounded-3xl px-4 py-1 hover:bg-blue-200 hover:text-blue-900 transtion duration-200">Home</a>
                <a href="{%url 'logout' %}" class="mx-2 cursor-pointer font-sans font-bold border-2 rounded-3xl px-4 py-1 hover:bg-blue-200 hover:text-blue-900 transtion duration-200">Logout</a>
                <a href="{%url 'profile'%}" class="mx-2 cursor-pointer font-sans font-bold border-2 rounded-3xl px-4 py-1 hover:bg-blue-200 hover:text-blue-900 transtion duration-200">Profile</a>

                <div class="row ">
<!--                    <div class="col-20 align-left">-->
                        <form class="ml-40 form-inline">
                            <button id="search-icon" class="btn btn-outline-success row-2" type="button">Search</button>
                            <input style="background-color black" id="user-input" class="form-control form-control-sm ml-3 w-75" type="text" placeholder="Search" aria-label="Search">
                        </form>
<!--                    </div>-->


                  <div id="replaceable-content" class="col-6">
                    {% include 'app1/partial.html' %}
                  </div>

                </div>

            </ul>
        </nav>
    </div>


        <div class="flex  ml-20  flex-wrap ">
            {%for item in workss%}
            <div class="flex-wrap mr-10 rounded-lg shadow-lg bg-white w-1/5 my-40 hover: ">
                <img class="rounded-t-lg" src="../media/{{item.photo}}"/>
              <div class="p-5">
                <h5 class="text-gray-900 text-xl font-medium mb-1">{{item.TypeOfWork}}</h5>
                <p class="text-gray-700 text-base mb-3">
                  work description in 2 lines.
                  mini two line it looks nice
                </p>
                <a href="{% url 'work' item.id %}" class="btn btn-primary inline-block w-full px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out">{{item}}</a>

              </div>

            </div>
          {%endfor%}
        </div>

</body>

</html>


</body>

<script>

    const user_input = $("#user-input")
    const search_icon = $("#search-icon")
    const works_div = $("#replaceable-content")

    const endpoint = '/app1/home/'
    const delay_by_in_ms = 700
    let scheduled_function = false

    let ajax_call = function (endpoint, request_parameters) {
    $.getJSON(endpoint, request_parameters)
        .done(response => {
        console.log(response)
            works_div.fadeTo('slow', 0).promise().then(() => {
                works_div.html(response['html_from_view'])
                works_div.fadeTo('slow', 1)
                search_icon.removeClass('blink')
            })
        })

}


user_input.on('keyup', function () {

    const request_parameters = {
        q: $(this).val() // value of user_input: the HTML element with ID user-input
    }

    search_icon.addClass('blink')

    if (scheduled_function) {
        clearTimeout(scheduled_function)
    }

    scheduled_function = setTimeout(ajax_call, delay_by_in_ms, endpoint, request_parameters)
})

</script>


</html>